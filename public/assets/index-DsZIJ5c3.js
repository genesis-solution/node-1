import{l as e,n as s,r as a,w as N,a0 as H,L as T,Q as S,k as _,aa as X}from"./index-7VV-N64s.js";import{S as Y,A as I,a as ee,b as te,M as se,c as le,H as re,D as ie}from"./StepSeven-BL6brtEE.js";import{u as ae}from"./useDraftSpot-C54CnDr5.js";import{r as z}from"./index-CsrS5TK7.js";import"./ChangeView-CDkdWtqO.js";import"./MapEvents-DoU__i7w.js";import"./Spot-BQhcZjWC.js";import"./useCategories-CVIE_Zfq.js";import"./useAmenities-ByFBqxGF.js";const ne="/assets/locationpin-CbErd5Qu.png",oe="/assets/camara-CCOINa2p.png",ce="/assets/smallhouse-B1UuJwcK.png",de=({getProgress:u,progress:b})=>e("div",{className:`bg-blue-100 ${b==-1?"w-screen h-[90vh] ":"w-0 h-0"} duration-200 overflow-hidden    bottom-0  w-screen flex items-center justify-center`,children:s("div",{className:" p-6 rounded-md w-full h-full flex flex-col items-center gap-5",children:[e("h1",{className:"text-xl font-semibold mb-4 text-center",children:"It's easy to get started on AppiSpot"}),s("div",{className:"space-y-6",children:[s("div",{className:"flex items-center flex-row-reverse justify-between space-x-3",children:[e("div",{className:" p-2 rounded-full",children:e("img",{src:ne,alt:""})}),s("div",{children:[e("p",{className:"font-medium",children:"Tell us about your place"}),e("p",{className:"text-sm text-gray-500",children:"Share some basic info, such as where it is and how many guests can stay."})]})]}),e("hr",{className:"bg-[#000000] w-screen"}),s("div",{className:"flex items-center flex-row-reverse justify-between space-x-3",children:[e("div",{className:" size-[85px] p-2 rounded-full",children:e("img",{src:oe,alt:""})}),s("div",{children:[e("p",{className:"font-medium",children:"Make it stand out"}),e("p",{className:"text-sm text-gray-500",children:"Add photos, title, and description."})]})]}),e("hr",{className:"bg-[#000000] w-screen"}),s("div",{className:"flex items-center flex-row-reverse justify-between space-x-3",children:[e("div",{className:" p-2 rounded-full",children:e("div",{className:" size-[85px] p-2 rounded-full",children:e("img",{src:ce,alt:""})})}),s("div",{children:[e("p",{className:"font-medium",children:"Finish up and publish"}),e("p",{className:"text-sm text-gray-500",children:"Choose a starting price, verify a few details, then publish your listing."})]})]}),e("hr",{className:"bg-[#000000] w-screen"})]}),e("button",{onClick:u,className:"mt-6 text-white  bg-black font-medium py-2 px-4 rounded w-full",children:"Get started"})]})}),ue="/assets/gradenhouse-CRsNAbiV.png",me=({progress:u})=>e("div",{className:`bg-blue-100  
      // ${u==0?"h-[80vh] w-screen ":"w-0 h-0"}
     flex items-center justify-center overflow-hidden duration-100`,children:s("div",{className:" w-full h-full p-6 rounded-md flex flex-col justify-evenly ",children:[e("div",{className:"border  rounded-md ",children:e("img",{src:ue,alt:"House",className:"w-full rounded-md"})}),s("div",{className:"mt-4",children:[e("h2",{className:"text-lg font-semibold",children:"Step 1"}),e("h3",{className:"text-xl font-semibold mt-2",children:"Ready to showcase your space? "}),e("p",{className:"text-gray-600 mt-2 text-sm",children:"Start by telling us about your spot and setting the perfect price. Next, share the location details and let us know how many guests can enjoy your space."})]})]})});function he({progress:u,indicator:b,setIndicator:l,spot:i,onChange:p}){var w;const[t,f]=a.useState({...i,name:"spot"});a.useEffect(()=>{p({...i,...t})},[t]);const[c,r]=a.useState({input:"",show:!1}),[m,g]=a.useState(!1);return a.useState("Select an option"),a.useState(""),a.useState(""),a.useState(""),a.useEffect(()=>{u===1&&(t!=null&&t.description&&(t!=null&&t.price)&&(t!=null&&t.area)?l(!1):l(!0))},[t==null?void 0:t.description,t==null?void 0:t.price,t==null?void 0:t.area,u,l]),s("div",{className:`bg-blue-100 relative rounded-lg shadow-md ${u===1?"max-w-md min-h-screen h-fit p-6":"h-0 w-0"} duration-200 overflow-hidden mx-auto mb-4`,children:[c.show&&e("div",{onClick:()=>r({input:"",show:!1}),className:"fixed w-screen h-screen bg-transparent top-0 "}),s("div",{className:"text-2xl flex gap-3 items-center font-semibold mb-4",children:["Spot Information"," "]}),s("div",{className:"flex flex-col -ml-6 pr-6 px-3 justify-between h-[50vh] items-center w-screen",children:[s("div",{className:"mb-2 w-full",children:[s("label",{className:" text-gray-700 relative flex justify-start items-center gap-2 font-medium mb-2",htmlFor:"description",children:["Description",e("button",{className:"-ml-1 -mt-2",onClick:()=>r({input:"disc",show:!m.show}),children:s("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{y:"0.5",width:"12",height:"12",rx:"6",fill:"white"}),e("rect",{x:"0.5",y:"1",width:"11",height:"11",rx:"5.5",stroke:"black",strokeOpacity:"0.75"}),e("path",{d:"M7.29979 3.5C7.11408 3.5 6.93598 3.55925 6.80467 3.66471C6.67335 3.77017 6.59958 3.9132 6.59958 4.06235C6.59958 4.21149 6.67335 4.35453 6.80467 4.45999C6.93598 4.56545 7.11408 4.62469 7.29979 4.62469C7.4855 4.62469 7.6636 4.56545 7.79491 4.45999C7.92623 4.35453 8 4.21149 8 4.06235C8 3.9132 7.92623 3.77017 7.79491 3.66471C7.6636 3.55925 7.4855 3.5 7.29979 3.5ZM7.13174 5.28826C6.57624 5.32575 5.05912 6.29674 5.05912 6.29674C4.96576 6.35297 4.99376 6.34922 5.06845 6.45419C5.14314 6.55542 5.13381 6.56291 5.2225 6.51418C5.31586 6.46544 5.46991 6.38671 5.72665 6.25925C6.71628 5.74939 5.88537 6.92656 5.46057 8.90977C5.29252 9.892 6.39418 9.38589 6.67894 9.23593C6.95902 9.08972 7.71058 8.67359 7.78527 8.63235C7.88797 8.57611 7.81328 8.53113 7.73392 8.4374C7.6779 8.37367 7.62189 8.41866 7.62189 8.41866C7.31846 8.57986 6.76296 8.91727 6.68827 8.70358C6.59958 8.48989 7.16908 7.02404 7.48184 6.01556C7.53319 5.77563 7.67324 5.25077 7.13174 5.28826Z",fill:"black"})]})}),c.show&&c.input==="disc"&&e("div",{className:"border-[1px] absolute left-[35%] bg-blue-100 -top-4 w-[65%] text-[8px] p-3 border-black rounded-2xl",children:"When writing the description, please be very detailed about your spot. This will give guests a clear idea of what to expect."})]}),e("textarea",{id:"description",value:t==null?void 0:t.description,onChange:n=>f({...t,description:n.target.value}),placeholder:"Describe your Spot",className:"w-full border h-[100px] border-gray-300 rounded py-2 px-3 bg-transparent text-gray-700",maxLength:"500"}),s("div",{className:"text-right w-full text-gray-400 text-sm",children:[(w=t==null?void 0:t.description)==null?void 0:w.length,"/500"]})]}),s("div",{className:"mb-2 w-full",children:[s("label",{className:"flex relative justify-start items-center  text-gray-700 font-medium mb-2",htmlFor:"spotPrice",children:["Price/hr",e("button",{className:"ml-1 -mt-2",onClick:()=>r({input:"price",show:!m.show}),children:s("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{y:"0.5",width:"12",height:"12",rx:"6",fill:"white"}),e("rect",{x:"0.5",y:"1",width:"11",height:"11",rx:"5.5",stroke:"black",strokeOpacity:"0.75"}),e("path",{d:"M7.29979 3.5C7.11408 3.5 6.93598 3.55925 6.80467 3.66471C6.67335 3.77017 6.59958 3.9132 6.59958 4.06235C6.59958 4.21149 6.67335 4.35453 6.80467 4.45999C6.93598 4.56545 7.11408 4.62469 7.29979 4.62469C7.4855 4.62469 7.6636 4.56545 7.79491 4.45999C7.92623 4.35453 8 4.21149 8 4.06235C8 3.9132 7.92623 3.77017 7.79491 3.66471C7.6636 3.55925 7.4855 3.5 7.29979 3.5ZM7.13174 5.28826C6.57624 5.32575 5.05912 6.29674 5.05912 6.29674C4.96576 6.35297 4.99376 6.34922 5.06845 6.45419C5.14314 6.55542 5.13381 6.56291 5.2225 6.51418C5.31586 6.46544 5.46991 6.38671 5.72665 6.25925C6.71628 5.74939 5.88537 6.92656 5.46057 8.90977C5.29252 9.892 6.39418 9.38589 6.67894 9.23593C6.95902 9.08972 7.71058 8.67359 7.78527 8.63235C7.88797 8.57611 7.81328 8.53113 7.73392 8.4374C7.6779 8.37367 7.62189 8.41866 7.62189 8.41866C7.31846 8.57986 6.76296 8.91727 6.68827 8.70358C6.59958 8.48989 7.16908 7.02404 7.48184 6.01556C7.53319 5.77563 7.67324 5.25077 7.13174 5.28826Z",fill:"black"})]})}),c.show&&c.input==="price"&&e("div",{className:"border-[1px] absolute left-[29%] bg-blue-100 -top-3 text-[8px] w-[70%] p-3 border-black rounded-2xl",children:"Set your price at a reasonable rate. Why? If it's too high, it might not be appealing to guests. If you need help, feel free to reach out to us at [contact]."})]}),e("input",{type:"text",id:"spotPrice",value:t==null?void 0:t.price,onChange:n=>f({...t,price:+n.target.value}),placeholder:"Enter price/hr",className:"w-full border border-gray-300 rounded py-2 px-3 bg-transparent text-gray-700"})]}),s("div",{className:"mb-2 w-full mt-3",children:[s("label",{className:"flex relative text-gray-700 font-medium mb-2",htmlFor:"spotSqft",children:["Spot Sq/ft",e("button",{className:"ml-1 -mt-3",onClick:()=>r({input:"sqft",show:!m.show}),children:s("svg",{width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{y:"0.5",width:"12",height:"12",rx:"6",fill:"white"}),e("rect",{x:"0.5",y:"1",width:"11",height:"11",rx:"5.5",stroke:"black",strokeOpacity:"0.75"}),e("path",{d:"M7.29979 3.5C7.11408 3.5 6.93598 3.55925 6.80467 3.66471C6.67335 3.77017 6.59958 3.9132 6.59958 4.06235C6.59958 4.21149 6.67335 4.35453 6.80467 4.45999C6.93598 4.56545 7.11408 4.62469 7.29979 4.62469C7.4855 4.62469 7.6636 4.56545 7.79491 4.45999C7.92623 4.35453 8 4.21149 8 4.06235C8 3.9132 7.92623 3.77017 7.79491 3.66471C7.6636 3.55925 7.4855 3.5 7.29979 3.5ZM7.13174 5.28826C6.57624 5.32575 5.05912 6.29674 5.05912 6.29674C4.96576 6.35297 4.99376 6.34922 5.06845 6.45419C5.14314 6.55542 5.13381 6.56291 5.2225 6.51418C5.31586 6.46544 5.46991 6.38671 5.72665 6.25925C6.71628 5.74939 5.88537 6.92656 5.46057 8.90977C5.29252 9.892 6.39418 9.38589 6.67894 9.23593C6.95902 9.08972 7.71058 8.67359 7.78527 8.63235C7.88797 8.57611 7.81328 8.53113 7.73392 8.4374C7.6779 8.37367 7.62189 8.41866 7.62189 8.41866C7.31846 8.57986 6.76296 8.91727 6.68827 8.70358C6.59958 8.48989 7.16908 7.02404 7.48184 6.01556C7.53319 5.77563 7.67324 5.25077 7.13174 5.28826Z",fill:"black"})]})}),c.show&&c.input==="sqft"&&e("div",{className:"border-[1px] absolute left-[30%]   bg-blue-100 text-[8px] -top-3 w-[70%] px-3 py-2 border-black rounded-2xl",children:"The square footage of your spot is important for guests to know how much space they have to work with."})]}),e("input",{type:"text",id:"spotSqft",value:t==null?void 0:t.area,onChange:n=>f({...t,area:+n.target.value}),placeholder:"Enter Sq/ft",className:"w-full border border-gray-300 bg-transparent rounded py-2 px-3 text-gray-700"})]})]})]})}function B({progress:u,thumbnail:b,handleSwitchRole:l,data:i,loading:p,submittion:t}){var f,c,r;return B.propTypes={progress:N.number.isRequired,thumbnail:N.string,handleSwitchRole:N.func.isRequired,data:N.object.isRequired},H(),s("div",{className:`${u==12?"bg-blue-100 py-5 px-3 w-screen min-h-[90vh] max-w-md mx-auto text-center rounded-lg":"h-0 w-0"} overflow-hidden`,children:[s("div",{className:"bg-gray-200 h-[30vh] w-full relative  mb-6 rounded-2xl",children:[b&&e("img",{src:b,alt:"thumbnail",className:"w-full h-full object-cover rounded-2xl"}),s("div",{className:"absolute flex justify-center items-center text-xl font-semibold w-1/3 h-10 bg-white/100 rounded-xl border-2  border-zinc-300 text-zinc-800 top-[79%] left-4 ",children:["$120 ",e("span",{className:"text-sm ml-3",children:"per hour"})]})]}),e("div",{className:"w-full",children:s("p",{className:"text-lg text-start font-semibold mb-2",children:[(f=i==null?void 0:i.location)==null?void 0:f.city,",",(c=i==null?void 0:i.location)==null?void 0:c.state]})}),s("div",{className:"text-gray-500 mb-4 text-start pr-7 ",children:[e("br",{}),i&&e("textarea",{name:"",className:"w-full bg-transparent border-none h-auto resize-none outline-none focus:ring-0",value:i==null?void 0:i.description,id:"",rows:1,onChange:m=>{m.target.style.height=m.target.scrollHeight+"px",m.target.style.height=m.target.scrollHeight+"px"}}),(i==null?void 0:i.amenities)&&e("ul",{className:"list-disc ml-6",children:i&&((r=i==null?void 0:i.amenities)==null?void 0:r.map((m,g)=>(console.log(m.name),e("li",{className:"text-blue-500 ",children:e("span",{className:"text-zinc-400",children:m.name})},g))))})]}),e("button",{onClick:()=>l(i),className:`mt-4 duration-200 ${p&&"hidden"}  ${t?"animate-spin  w-10 h-10  border-t-4  border-blue-100 font-medium rounded-full bg-black  transition-colors":"mt-4 px-6 py-3 bg-brand-primary text-white font-medium rounded-lg  transition-colors"}`,disabled:t,children:e("span",{className:"h-full w-12",children:!t&&"Save and Send for Verification"})}),p&&s("div",{className:"mt-4 flex justify-evenly items-center",children:[e(T,{to:"/",className:"bg-brand-primary text-white font-medium rounded-lg px-6 py-3 mt-4 transition-colors",children:"Home"}),e(T,{to:"/host/default",className:"bg-brand-primary text-white font-medium rounded-lg px-6 py-3 mt-4 transition-colors",children:"Dashboard"})]})]})}const pe="/assets/colorimage-6A_avjbs.png",fe=({progress:u})=>e("div",{className:`bg-blue-100  
      // ${u==5?"h-[80vh] w-screen ":"w-0 h-0"}
     flex items-center justify-center overflow-hidden duration-100`,children:s("div",{className:" w-full h-full p-6 rounded-md flex flex-col justify-evenly ",children:[e("div",{className:"border  rounded-md ",children:e("img",{src:pe,alt:"House",className:"w-full rounded-md"})}),s("div",{className:"mt-4",children:[e("h2",{className:"text-lg font-semibold",children:"Step 2"}),s("h3",{className:"text-xl font-semibold mt-2",children:["Make your place ",e("br",{}),"stand out"]}),e("p",{className:"text-gray-600 mt-2 text-sm",children:"In this step, you will add some of the amenities your place offers and add high quality photos. Then check on some rules."})]})]})}),be="/assets/peoplestable-D4-BucAM.png",ge=({progress:u})=>e("div",{className:`bg-blue-100  
      // ${u==10?"h-[80vh] w-screen ":"w-0 h-0"}
     flex items-center justify-center overflow-hidden duration-100`,children:s("div",{className:"  h-full  rounded-md  flex flex-col justify-evenly w-full ",children:[e("div",{className:"border  rounded-md p-4",children:e("img",{src:be,alt:"House",className:"w-full rounded-md"})}),s("div",{className:"mt-4 p-6",children:[e("h2",{className:"text-lg font-semibold",children:"Step 3"}),e("h3",{className:"text-xl font-semibold mt-2",children:"Finish up and publish"}),e("p",{className:"text-gray-600 mt-2 text-sm",children:"Finally, you will upload some required documents and publish your listing.."})]})]})}),Ae=({onClose:u,refetch:b})=>{var D,A,q;const[l,i]=a.useState(-1),p=12,[t,f]=a.useState(null),{spotRef:c,spot:r,updateSpot:m}=ae();z.useAsyncDebounce(m,1500);const[g,w]=a.useState(!1),[n,d]=a.useState(!1),[Z,k]=a.useState(!1),[xe,O]=a.useState(null),[j,P]=a.useState([]),[y,L]=a.useState([]),{auth:C}=H(),[U,we]=a.useState(((A=(D=r==null?void 0:r.current)==null?void 0:D.owner)==null?void 0:A._id)??((q=r==null?void 0:r.current)==null?void 0:q.owner)),[Q,V]=a.useState([]);a.useEffect(()=>{},[r,l,g,n]);const $=()=>{i(o=>o<p?o+1:o)},W=()=>{i(o=>o>-1?o-1:o)},h=o=>{c.current={...c.current,...o,images:j,docs:y,owner:C==null?void 0:C._id},console.log(c.current),V(c.current),O(c.current)},G=o=>{X("host").then(()=>{J(o),console.log(o)}).catch(v=>{S.error(v.message)})},J=z.useAsyncDebounce(async o=>{var M;if(k(!0),!o)return;console.log({_spot:o});const v=((M=o.owner)==null?void 0:M._id)??o.owner??U;if(!v)return S.error("Please select a user");const F={...o,owner:v,draft:!1};console.log({data:F});try{await S.promise(async()=>{w(!0),await _.patchForm("/product",F),r&&(r.current=null),await new Promise(x=>setTimeout(x,1e3))},{success:"Spot saved successfully",pending:"Saving Spot...",error:{render({data:x}){var E,R;return console.log(x),((R=(E=x==null?void 0:x.response)==null?void 0:E.data)==null?void 0:R.message)||"Failed to save spot"}}})}finally{w(!0),k(!1)}},500);a.useEffect(()=>{l==8&&d(!t)},[l,t]),a.useEffect(()=>{l==11&&(y.length>0?d(!1):d(!0))},[l,y]);const K=o=>e("div",{className:"mt-0 bg-zinc-300 flex gap-2 h-1 w-full rounded-3xl",children:e("div",{className:"h-1 rounded-3xl bg-black duration-300",style:{width:`${l*10}%`}})});return s("div",{className:"min-h-[90vh] bg-blue-100 overflow-hidden w-screen",children:[e(de,{getProgress:$,progress:l}),e(me,{progress:l,indicator:n,setIndicator:d}),e(he,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(Y,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(I,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(ee,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(fe,{progress:l}),e(te,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(se,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(le,{progress:l,thumbnail:t,setThumbnail:f,indicator:n,onChange:h,allimages:j,setallimages:P,spot:r,setIndicator:d}),e(re,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d}),e(ge,{progress:l}),e(ie,{progress:l,onChange:h,spot:r,indicator:n,setIndicator:d,alldocs:y,setalldocs:L}),e(B,{progress:l,thumbnail:t,handleSwitchRole:G,loading:g,data:Q,submittion:Z,indicator:n,setIndicator:d}),l<=p&&e("div",{className:`flex fixed z-[9999] bg-blue-100 ${l>=0?"h-[11vh]":"h-0"} duration-200 w-screen bottom-0 justify-between mb-0`,children:s("div",{className:"w-full h-full relative flex flex-col gap-3 px-2",children:[K(),s("div",{className:"flex justify-between items-center px-12 w-full",children:[e("button",{onClick:W,className:`text-black bg-brand-primary font-medium py-2 px-4 rounded ${g&&"hidden"} `,disabled:l<1,children:"Back"}),e("button",{onClick:$,className:`text-black  bg-brand-primary font-medium duration-200 py-2 px-4 rounded ${l==p&&"hidden"}  ${n&&"border-2 border-brand-primary bg-gray-400 text-black "}`,disabled:n,children:"Next"})]})]})})]})};export{Ae as default};
