import{l as e,bo as x,F as g,r as p,t as C,n as o,S as m,ad as d,k as h,Q as v,ac as l}from"./index-7VV-N64s.js";import{u as F}from"./useCategories-CVIE_Zfq.js";const D=[{id:"type",header:"Coupon Type",accessorFn:t=>t.type},{id:"min",header:"Minimun Order",accessorFn:t=>t.min},{id:"value",header:"Price/Percent",accessorFn:t=>t.value},{id:"code",header:"Coupon Code",accessorFn:t=>t.code??"(Discount Coupon)"},{id:"valid.from",header:"Start Date",accessorFn:t=>new Date(t.valid.from).toLocaleDateString()},{id:"valid.to",header:"Expiry Date",accessorFn:t=>new Date(t.valid.to).toLocaleDateString()},{id:"STATUS",header:"STATUS",accessorFn:t=>new Date(t.valid.to).getTime()>Date.now()?"Active":"Expired"}],S=({data:t})=>e(g,{children:e(x,{data:t??[],columns:D})});function T(){const[t,f]=p.useState("coupon"),c={categories:[],type:void 0,value:void 0,min:0,code:void 0,description:void 0,"valid.from":void 0,"valid.to":void 0},[n,i]=p.useState(c),{categories:y}=F(),s=a=>{i(r=>({...r,categories:c.categories})),f(a.target.value)},u=C({queryKey:["discountCoupon"],queryFn:async({signal:a})=>(await h.get("/discount",{signal:a})).data,initialData:[]});return o(g,{children:[o("form",{className:"py-4 w-full",onSubmit:async a=>{a.preventDefault();try{await h.post("/discount",n),v.success("Discount/Coupon added successfully"),i(c),u.refetch()}catch(r){v.error(r.response.data.message)}},onReset:()=>i(c),children:[o("div",{className:"flex items-center gap-4 mb-2",children:[o("div",{children:[e("input",{type:"radio",name:"coupon",id:"coupon",value:"coupon",className:"mr-2",onChange:s,checked:t==="coupon"}),e("label",{htmlFor:"coupon",children:"Coupon"})]}),o("div",{children:[e("input",{type:"radio",name:"coupon",id:"discount",value:"discount",className:"mr-2",checked:t==="discount",onChange:s}),e("label",{htmlFor:"discount",children:"Discount"})]})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"type",required:!0,children:"Type"}),o(m,{id:"type",required:!0,value:n.type,onChange:a=>i(r=>({...r,type:a.target.value})),children:[e("option",{value:"",children:"Select Type"}),e("option",{value:"percentage",children:"Percentage"}),e("option",{value:"flat",children:"Flat"})]})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"value",required:!0,children:"Percent/Price"}),e(d,{type:"number",id:"value",placeholder:"Percent/Price",required:!0,min:0,value:n.value,onChange:a=>i(r=>({...r,value:a.target.value}))})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"min",required:!0,children:"Minimum Order"}),e(d,{type:"number",id:"min",placeholder:"Minimum Order",required:!0,min:0,value:n.min,onChange:a=>i(r=>({...r,min:a.target.value}))})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"code",required:!0,children:"Code"}),e(d,{type:"text",id:"code",placeholder:"Code",required:!0,value:n.code,onChange:a=>i(r=>({...r,code:a.target.value}))})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"description",children:"Description"}),e(d,{type:"text",id:"description",placeholder:"Description",value:n.description,onChange:a=>i(r=>({...r,description:a.target.value}))})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"valid.from",required:!0,children:"Start Date"}),e(d,{type:"date",id:"valid.from",required:!0,value:n["valid.from"]??new Date().toISOString().split("T")[0],onChange:a=>i(r=>({...r,"valid.from":a.target.value}))})]}),o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"valid.to",required:!0,children:"End Date"}),e(d,{type:"date",id:"valid.to",required:!0,value:n["valid.to"],onChange:a=>i(r=>({...r,"valid.to":a.target.value}))})]}),t==="discount"&&o("div",{className:"flex flex-col gap-1.5",children:[e(l,{htmlFor:"category",required:!0,children:"Category"}),o(m,{id:"category",required:t==="discount",value:n.categories[0],onChange:a=>i(r=>({...r,categories:[a.target.value]})),children:[e("option",{value:"",children:"Select Category"}),y.map(a=>e("option",{value:a._id,children:a.name},a._id))]})]}),o("div",{className:"flex gap-3 max-w-sm",children:[e("button",{className:"px-4 py-2 bg-green-500 text-white rounded-md w-44",children:"Add"}),e("button",{className:"px-4 py-2 bg-red-500 text-white rounded-md w-44",type:"reset",children:"Cancel"})]})]}),e(S,{data:u.data})]})}export{T as default};
