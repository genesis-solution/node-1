import{l as t,bo as g,F as v,r as i,bn as f,k as m,n as s,ac as l,S as u,ad as x,Q as h}from"./index-7VV-N64s.js";import{u as F}from"./useCityAndStates-BqyloICP.js";const w=[{id:"State",header:"State",accessorFn:a=>a.state},{id:"City",header:"City",accessorFn:a=>a.city},{id:"ServiceFee",header:"ServiceFee",accessorFn:a=>a.serviceFee}],N=a=>t(v,{children:t(g,{columns:w,...a.query})});function k(){const[a,y]=i.useState(""),[r,b]=i.useState(),[c,S]=i.useState(void 0),{states:p,cities:n}=F({state:c}),o=f({queryKey:["taxes","United States",c],queryFn:async(e,d)=>({total:1,data:(await m.get("/chargeRate",{params:e,signal:d})).data})});return s("div",{children:[t("div",{className:"flex justify-around",children:s("form",{onSubmit:async e=>{e.preventDefault();try{await m.patch("/chargeRate",{state:c,city:a,serviceFee:r,country:"United States"}),h.success(`Successfully updated ${c}, ${a} service to ${r}%`),o.query.refetch()}catch{h.error("Something went wrong while updating")}},className:"p-4 bg-white rounded-lg shadow-md max-w-xs",children:[t("h2",{className:"text-lg font-medium mb-4",children:"Manage Tax"}),s("div",{className:"mb-4",children:[t(l,{htmlFor:"states",className:"block text-gray-700 font-medium mb-2",children:"Select state"}),s(u,{name:"state",id:"states",className:"w-full",onChange:e=>S(e.target.value),value:c,children:[t("option",{value:"",children:"Select State"}),p.map(e=>t("option",{value:e,children:e},e))]})]}),s("div",{className:"mb-4",children:[t(l,{htmlFor:"cities",className:"block text-gray-700 font-medium mb-2",children:"Select city"}),s(u,{name:"city",id:"cities",className:"w-full",onChange:e=>y(e.target.value),value:a,children:[t("option",{value:"",children:"Select City"}),n==null?void 0:n.map(e=>t("option",{value:e,children:e},e))]})]}),s("div",{className:"mb-4",children:[t(l,{htmlFor:"couponType",className:"block w-full text-gray-700 font-medium mb-2",children:"Service Fee"}),t(x,{type:"number",name:"taxRate",value:r,step:.01,onChange:e=>b(e.target.value)})]}),t("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",children:"Update"})]})}),t(N,{query:o,tableName:"Tax Rates"})]})}export{k as default};
