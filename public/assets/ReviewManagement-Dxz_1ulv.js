import{l as e,r as h,n as l,w as m,bG as j}from"./index-CYYMkemY.js";import{u as R}from"./useSpots-CKvFjNFJ.js";import{S as u}from"./index-BiQ69Uv7.js";import{S}from"./SpotCard-DM2y568E.js";import{u as x}from"./useReviews-B1JI61pR.js";import"./swiper-DX2zQgap.js";function T(){return e(j,{title:"Reviews",children:e($,{},"my-spot")})}const $=()=>{const{spots:s}=R({draft:!1});return e("div",{className:"flex max-sm:mb-16 flex-col gap-5",children:s.map(t=>e("div",{className:"bg-white p-4 rounded-lg shadow-md",children:t&&l("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[e(S,{spot:t}),e(p,{spot:t}),e(N,{spot:t})]},t._id)},t._id))})},p=({spot:s})=>{s.rating;const{data:t=[]}=x({target:s==null?void 0:s._id}),[r,o]=h.useState(0),[d,f]=h.useState({});h.useEffect(()=>{if(t.length>0){let a=0;const i={};for(let c=0;c<t.length;c++)a+=t[c].rating,t[c].tags.forEach(g=>{i[g]?i[g]++:i[g]=1});o(a/t.length),f(i)}},[t]);const n=t.length?t.filter(a=>a.rating===5).length/t.length*100:0,w=t.length?t.filter(a=>a.rating===4).length/t.length*100:0,v=t.length?t.filter(a=>a.rating===3).length/t.length*100:0,y=t.length?t.filter(a=>a.rating===2).length/t.length*100:0,b=t.length?t.filter(a=>a.rating===1).length/t.length*100:0;return l("div",{className:"flex flex-col md:flex-row items-center md:justify-between p-4",children:[l("div",{className:"flex items-center max-sm:flex-col max-sm:w-full gap-3",children:[l("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg mr-4",children:[e("p",{className:"text-2xl text-center font-bold",children:r.toFixed(1)||"N/A"}),e("p",{className:"text-sm",children:"Average Rating"})]}),l("div",{className:"flex flex-col max-sm:w-full w-[20vw] gap-1",children:[l("div",{className:"text-sm w-full justify-start items-center flex gap-3",children:[e("span",{className:"w-fit",children:"Excellent"}),e("div",{className:"w-3/4",children:e("div",{className:"bg-brand-primary duration-200 h-2 rounded-full",style:{width:`${n}%`}})})]}),l("div",{className:"text-sm w-full justify-start items-center flex gap-3",children:[e("pre",{className:"w-fit font-sans",children:"Very Good"}),e("div",{className:"w-3/4",children:e("div",{className:"bg-brand-primary duration-200 h-2 rounded-full",style:{width:`${w}%`}})})]}),l("div",{className:"text-sm w-full justify-start items-center flex gap-3",children:[e("span",{className:"w-fit",children:"Average"}),e("div",{className:"w-3/4",children:e("div",{className:"bg-brand-primary duration-200 h-2 rounded-full",style:{width:`${v}%`}})})]}),l("div",{className:"text-sm w-full justify-start items-center flex gap-3",children:[e("span",{className:"w-fit",children:"Poor"}),e("div",{className:"w-3/4",children:e("div",{className:"bg-brand-primary duration-200 h-2 rounded-full",style:{width:`${y}%`}})})]}),l("div",{className:"text-sm w-full justify-start items-center flex gap-3",children:[e("span",{className:"w-fit",children:"Bad"}),e("div",{className:"w-3/4",children:e("div",{className:"bg-brand-primary duration-200 h-2 rounded-full",style:{width:`${b}%`}})})]})]})]}),e("div",{className:"flex flex-wrap gap-3 justify-around mt-4 md:mt-0",children:Object.entries(d).map(([a,i])=>l("div",{className:"flex justify-center items-center w-32 text-center flex-col gap-2 shadow-md px-3 rounded-lg border-2 border-zinc-300",children:[e("span",{className:"text-xl font-semibold",children:i}),e("span",{children:a})]},a))}),e("div",{className:"flex flex-col gap-2 mt-4"})]})},N=({spot:s})=>{const{data:t}=x({target:s==null?void 0:s._id});return e("div",{className:"flex flex-col  gap-12 w-full lg:px-5",children:(t==null?void 0:t.length)>0?t.map((r,o)=>{var d;return l("div",{className:"border-t pt-4",children:[l("div",{className:"flex justify-between",children:[e("p",{className:"text-base font-medium text-gray-600",children:(d=r.user)==null?void 0:d.name}),l("div",{className:"flex",children:[Array(r.rating).fill().map((f,n)=>e(u,{className:"text-yellow-500 w-4 h-auto"},`star-${n}`)),Array(5-r.rating).fill().map((f,n)=>e(u,{className:"text-gray-400 w-4 h-auto"},`star-${n}`))]})]}),e("p",{className:"text-base text-gray-900",children:r.comment})]},`review-${o}`)}):e("span",{className:"font-medium text-center text-sm text-gray-500",children:"No Reviews Yet!"})})};N.propTypes={spot:m.object.isRequired};p.propTypes={spot:m.object.isRequired};m.string.isRequired,m.number.isRequired;export{p as RatingsSummary,T as default};
