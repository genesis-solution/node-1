import{r,Q as te,k as ne,l as e,bF as ae,bG as ie,n,ac as i,ad as s,S as U,w as u}from"./index-CYYMkemY.js";import{B as $}from"./BetterTimePicker-4mNBZ52D.js";import{D as re}from"./DialogFullscreen-x-GnnSsf.js";import"./index-BiQ69Uv7.js";import"./transition-D9da72fo.js";import"./Toolbar-vOywhSsd.js";function se({open:H,onClose:c,order:t,refetch:o}){var C,w,_,R,B,N,P,q,E,F,G,I,j,O,A,z,L,Q;const y=(w=(C=t.current)==null?void 0:C.rent)==null?void 0:w.start,J=(R=(_=t.current)==null?void 0:_.rent)==null?void 0:R.end,d=new Date(y??new Date),[l,K]=r.useState(),p=new Date(y??new Date),m=new Date(J??new Date),[h,k]=r.useState(),[g,x]=r.useState(),M=(P=(N=(B=t.current)==null?void 0:B.products)==null?void 0:N[0])==null?void 0:P.guests,V=(q=t.current)==null?void 0:q.amount,[v,D]=r.useState(),[b,T]=r.useState(),W=(F=(E=t.current)==null?void 0:E.transection)==null?void 0:F.status,[S,X]=r.useState(),Y=(G=t.current)==null?void 0:G.status,[f,Z]=r.useState(),ee=r.useCallback(async a=>{a.preventDefault(),await te.promise(async()=>{await ne.patch(`/order/${t.current._id}`,{rent:{start:h??p,end:g??m},amount:b,guests:v,status:f,"transection.status":S}),o&&o(),k(),x(),D(),T(),c()},{success:"Booking updated successfully!",pending:"Updating booking...",error:"Failed to update booking!"})},[t,h,p,g,m,b,v,f,S,o,c]);return console.log(t.current),e(re,{open:t.current&&H,onClose:c,title:"Edit Booking",children:e("div",{className:"w-full mt-1",children:e(ae,{children:e(ie,{title:"Edit Booking",children:n("form",{className:"flex flex-col gap-2 max-w-sm",onSubmit:ee,children:[n("div",{children:[e(i,{children:"Booking ID"}),e(s,{type:"text",value:(I=t.current)==null?void 0:I.id,disabled:!0})]}),n("div",{children:[e(i,{children:"Guest Name"}),e(s,{type:"text",value:(O=(j=t.current)==null?void 0:j.user)==null?void 0:O.name,disabled:!0})]}),n("div",{children:[e(i,{children:"Guest Email"}),e(s,{type:"text",value:(z=(A=t.current)==null?void 0:A.user)==null?void 0:z.email,disabled:!0})]}),n("div",{children:[e(i,{children:"Date"}),e(s,{type:"date",value:l!=null&&l.getTime()?l.toISOString().split("T")[0]:d.toISOString().split("T")[0],onChange:a=>K(new Date(a.target.value))})]}),n("div",{className:"grid grid-cols-2 z-[900] items-center",children:[e(i,{children:"Start Time"}),e($,{value:h??p,referenceDate:l??d,onChange:k,small:!0}),e(i,{children:"End Time"}),e($,{value:g??m,onChange:x,referenceDate:l??d,small:!0})]}),n("div",{children:[e(i,{children:"Guests"}),e(s,{type:"number",value:v??M,onChange:a=>D(a.target.value)})]}),n("div",{children:[e(i,{children:"Amount"}),e(s,{type:"number",value:b??V,onChange:a=>T(a.target.value)})]}),n("div",{children:[e(i,{children:"Transaction ID"}),e(s,{type:"text",value:(Q=(L=t.current)==null?void 0:L.transection)==null?void 0:Q.id,readOnly:!0})]}),n("div",{children:[e(i,{children:"Payment Status"}),n(U,{value:S??W,onChange:a=>X(a.target.value),children:[e("option",{value:"pending",children:"Pending"}),e("option",{value:"completed",children:"Completed"}),e("option",{value:"cancelled",children:"Cancelled"}),e("option",{value:"failed",children:"Failed"})]})]}),n("div",{children:[e(i,{children:"Status"}),n(U,{value:f??Y,onChange:a=>Z(a.target.value),children:[e("option",{value:"payment required",children:"Payment Required"}),e("option",{value:"pending",children:"Pending"}),e("option",{value:"confirmed",children:"Confirmed"}),e("option",{value:"processing",children:"Processing"}),e("option",{value:"cancelled",children:"Cancelled"}),e("option",{value:"failed",children:"Failed"}),e("option",{value:"out of stock",children:"Out of Stock"})]})]}),n("div",{className:"flex justify-end gap-2",children:[e("button",{className:"px-2 py-1 bg-gray-200 rounded-md border border-black",type:"reset",title:"Reset",onClick:c,children:"Cancel"}),e("button",{className:"px-4 py-1 bg-brand-primary text-black rounded-md border",type:"submit",title:"Save",onClick:c,children:"Save"})]})]})})})})})}se.propTypes={open:u.bool.isRequired,onClose:u.func.isRequired,order:u.object.isRequired,refetch:u.func.isRequired};export{se as default};
