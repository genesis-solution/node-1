import{r as i,b5 as q,q as T,a0 as L,l as e,n as s,F as D,Q as m,k as P}from"./index-7VV-N64s.js";import{c as k}from"./codes-Ckrw1uAF.js";function I(){const[o,S]=i.useState(""),[d,A]=i.useState(""),l=q(),[u,n]=i.useState(null),c=T(),g=t=>{t.target.name==="email"&&S(t.target.value),t.target.name==="password"&&A(t.target.value)},{refresh:E,query:C}=L();console.log(C.error);async function F(t){var r,f,p,b,h,x,w,y,N,v;try{const a=await P.post("/auth/login",t);await E(),l("/admin/default",{replace:!0,state:(f=(r=c.state)==null?void 0:r.from)==null?void 0:f.state}),console.log(a.data)}catch(a){if(((b=(p=a.response)==null?void 0:p.data)==null?void 0:b.code)===k.ACCOUNT_NOT_VERIFIED.code){m.warning("Account not verified. Please verify your email to login"),l("/auth/request-verfication-email",{state:{email:o,from:c}});return}if(((x=(h=a.response)==null?void 0:h.data)==null?void 0:x.code)===k["2FA_ENABLED"].code){l("/auth/request-2fa",{state:{email:o,password:t.password,from:c}});return}if(((y=(w=a.response)==null?void 0:w.data)==null?void 0:y.code)===429){m.error("Too many requests. Try again later");return}n(((v=(N=a.response)==null?void 0:N.data)==null?void 0:v.message)??"Something went wrong"),console.error(a)}}return e(D,{children:e("section",{className:"min-h-screen mt-0 w-full text-gray-900 px-3 py-10 bg-gradient-to-br from-[#3cdbfb] to-[#fff]",style:{backgroundColor:"linear-gradient(297deg, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 35%, rgba(0,212,255,1) 100%)"},children:s("div",{className:"w-full bg-gray-100 mx-auto rounded-lg shadow-lg sm:max-w-5xl flex flex-col",children:[s("div",{className:"text-black flex items-center lg:mx-4 cursor-pointer text-2xl md:text-3xl pt-5 mb-2 font-bold mx-3",children:[e("span",{className:"mb-3 md:mb-0",children:"Welcome To"}),e("img",{src:"http://66.94.114.70/logo.png",className:"md:pt-4 w-32 md:w-44 mx-2 inline-flex",alt:"",srcSet:""})]}),e("div",{className:"ml-4 text-left font-bold text-2xl",children:e("h1",{children:"Admin Login"})}),e("div",{className:"p-4",children:s("form",{onSubmit:async t=>{t.preventDefault();try{let r={email:o,password:d};n(null),await F(r)}catch(r){n(r),m.error("Something Went Wrong or Verify your email id")}},method:"post",children:[s("div",{className:"mb-3",children:[e("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),e("input",{onChange:g,value:o,type:"email",name:"email",id:"email",className:"border border-gray-300 text-black sm:text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",placeholder:"name@company.com"})]}),s("div",{className:"mb-3",children:[e("label",{htmlFor:"password",className:"block text-sm font-medium",children:"Password"}),e("input",{onChange:g,value:d,type:"password",name:"password",id:"password",placeholder:"••••••••",className:"border border-gray-300 text-black sm:text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5"})]}),u&&e("p",{className:"text-red-500 text-sm mt-2",children:u}),e("button",{type:"submit",className:"w-full mt-3 uppercase text-black bg-blue-100 hover:bg-blue-200 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Login"})]})})]})})})}export{I as default};
