import{x as u,bn as v,k as o,w as c,r as g,l as a,br as m,bq as h,Q as p,n as w,bk as R,bl as b,bm as y,bo as D}from"./index-7VV-N64s.js";function f(r){const i=r,[n]=u();return v({queryKey:["reviews",r],queryFn:async(e,s)=>{e={...i,...e};const t=n.get("user");t&&(e.user=t);const d=await o.get("/review",{params:e,signal:s});return{data:d.data.reviews,total:d.data.total}}})}const l=()=>{const r=f(),i=e=>{p.promise(o.delete(`/review/${e}`).then(r.query.refetch),{pending:"Deleting Review...",success:"Review Deleted",error:"Error Deleting Review"})},n=g.useMemo(()=>[{id:"spotId",header:"ID",accessorFn:e=>{var s;return((s=e.target)==null?void 0:s.id)??"N/A"}},{id:"user.name",header:"REVIEWED BY",accessorFn:e=>e.user.name},{id:"user.id",header:"GUEST ID",accessorFn:e=>e.user.id},{id:"comment",header:"Review",accessorFn:e=>e.comment},{id:"rating",header:"Rating",accessorFn:e=>e.rating},{id:"approved",header:"Approved",accessorFn:e=>e.approved?"Yes":"No"},{id:"action",header:"Action",Cell:({row:e})=>a(y,{menu:{items:[{key:"delete",icon:a(m,{}),label:"Delete",onClick:()=>i(e.original._id),danger:!0},{key:"approve",icon:a(h,{}),label:e.original.approved?"Disapprove":"Approve",onClick:()=>p.promise(o.patch(`/review/${e.original._id}`,{approved:!e.original.approved}).then(r.query.refetch),{pending:"Approving Review...",success:`Review ${e.original.approved?"Disapproved":"Approved"}`,error:"Error Approving Review"})}]},children:w(b,{children:["Manage",a(R,{})]})})}],[]);return a(D,{columns:n,...r})};l.propTypes={tableData:c.arrayOf(c.object).isRequired};function A(){return a(l,{})}export{A as default};
