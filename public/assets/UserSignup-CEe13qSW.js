import{w as u,n as t,l as e,ad as x,F as D,r as a,q as W,b5 as X,a8 as Y,L as U,k as Z,Q as $}from"./index-CYYMkemY.js";import{P as B}from"./PasswordInput-C24ba9vV.js";import{E as ee}from"./EmailInput-Cl1le8wg.js";import{S as te}from"./SubmitButton-BJ8cnncd.js";import{c as se}from"./codes-Ckrw1uAF.js";function Q({firstName:l,setFirstName:f,lastName:c,setLastName:p}){return t(D,{children:[e("label",{htmlFor:"firstName",className:"text-xs text-gray-700 font-[500]",children:"Name"}),t("div",{className:"mb-2 flex gap-2",children:[e(x,{onChange:r=>f(r.target.value),value:l,type:"text",name:"firstName",id:"firstName",placeholder:"First",required:!0,autoComplete:"off"}),e(x,{onChange:r=>p(r.target.value),value:c,type:"text",name:"lastName",id:"lastName",placeholder:"Last",autoComplete:"off"})]})]})}Q.propTypes={firstName:u.string,setFirstName:u.func,lastName:u.string,setLastName:u.func};function ce(){var P,S,C,k,E;const[l,f]=a.useState(""),[c,p]=a.useState(""),[r,R]=a.useState(""),[d,_]=a.useState(""),[v,z]=a.useState(""),[w,i]=a.useState(null),[n,m]=a.useState({}),[G,ae]=a.useState(!1),[b,H]=a.useState(!1),y=W(),J=X();let g=Y().role??"user";g==="guest"&&(g="user");const K=()=>b?l.length<2?m({firstName:{msg:"First Name is not valid"}}):r.length<5?m({email:{msg:"Email is not valid"}}):d.length<6?i("Password must be 6 characters"):d!==v?m({confirmPassword:{msg:"Password and Confirm Password must be same!"}}):!0:i("Please accept the terms and conditions");async function M(s){var h,N,F,L,A,I,T;try{const o=await Z.post("/auth/register",s);console.log(o.data),i(null),m({}),((h=o.data)==null?void 0:h.verified)===!1&&($.success("Account created successfully. Please verify your email to login"),J("../request-verfication-email",{state:{email:r,from:y}}))}catch(o){if(((N=o.response)==null?void 0:N.code)===se.BAD_REQUEST)return m((A=(L=(F=o.response)==null?void 0:F.data)==null?void 0:L.errors)==null?void 0:A.reduce((j,q)=>(j[q.path]={msg:q.msg},j),{}));i(((T=(I=o.response)==null?void 0:I.data)==null?void 0:T.message)??"Something went wrong"),console.error(o)}}const O=async s=>{if(s.preventDefault(),i(null),m({}),!K())return;await M({firstName:l,lastName:c,email:r,password:d,role:g})},V=s=>{_(s.target.value)};return t(D,{children:[t("form",{onSubmit:O,className:"my-4",children:[t("div",{className:"mb-2",children:[e(Q,{firstName:l,setFirstName:f,lastName:c,setLastName:p}),n.firstName&&e("p",{className:"text-red-500 text-sm mt-2",children:(P=n.firstName)==null?void 0:P.msg})]}),t("div",{className:"mb-2",children:[e(ee,{email:r,setEmail:R}),n.email&&e("p",{className:"text-red-500 text-sm mt-2",children:(S=n.email)==null?void 0:S.msg})]}),t("div",{className:"mb-2",children:[e(B,{password:d,handlePassword:V}),n.password&&e("p",{className:"text-red-500 text-sm mt-2",children:(C=n.password)==null?void 0:C.msg})]}),t("div",{className:"mb-2",children:[e(B,{password:v,handlePassword:s=>{z(s.target.value)},label:"Confirm Password"}),n.confirmPassword&&e("p",{className:"text-red-500 text-sm mt-2",children:(k=n.confirmPassword)==null?void 0:k.msg})]}),e("div",{className:"md:flex items-center mt-1 justify-between",children:e("div",{className:"flex items-start",children:e("div",{id:"recaptcha-container"})})}),w&&e("p",{className:"text-red-500 text-sm mt-2",children:w}),t("div",{className:"flex items-center mt-2",children:[e(x,{type:"checkbox",id:"terms",name:"terms",className:"h-4 w-4 text-black focus:ring-transparent border-gray-300 rounded",checked:b,onChange:s=>H(s.target.checked)}),t("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",e(U,{to:"/terms",className:"text-blue-500",children:"Terms and Conditions"})]})]}),e(te,{text:G?"Creating Account...":"Sign Up"})]}),t(U,{to:"..",className:"text-sm font-medium text-gray-500",state:{from:(E=y.state)==null?void 0:E.from},children:["Already have an account? "," ",e("span",{className:"text-black ml-3 underline",children:"Login"})]})]})}export{ce as default};
