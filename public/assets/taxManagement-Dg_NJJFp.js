import{r as c,l as t,bo as g,F as S,bn as f,k as u,n as s,ac as o,S as h,ad as w,Q as y}from"./index-7VV-N64s.js";import{u as N}from"./useCityAndStates-BqyloICP.js";const v=[{id:"State",header:"State",accessorFn:a=>a.state},{id:"City",header:"City",accessorFn:a=>a.city},{id:"TaxRate",header:"TaxRate",accessorFn:a=>a.taxRate}],T=a=>{const r=c.useMemo(()=>v,[]);return t(S,{children:t(g,{columns:r,...a.query})})};function k(){const[a,r]=c.useState(""),[l,x]=c.useState(),[n,b]=c.useState(void 0),{states:p,cities:i}=N({state:n}),d=f({queryKey:["taxes","United States",n],queryFn:async(e,m)=>({total:1,data:(await u.get("/chargeRate",{params:e,signal:m})).data})});return s("div",{children:[t("div",{className:"flex justify-around",children:s("form",{onSubmit:async e=>{e.preventDefault();try{await u.patch("/chargeRate",{state:n,city:a,taxRate:l,country:"United States"}),y.success(`Successfully updated ${n}, ${a} tax to ${l}%`),d.query.refetch()}catch{y.error("Something went wrong while updating")}},className:"p-4 bg-white rounded-lg shadow-md max-w-xs",children:[t("h2",{className:"text-lg font-medium mb-4",children:"Manage Tax"}),s("div",{className:"mb-4",children:[t(o,{htmlFor:"states",className:"block text-gray-700 font-medium mb-2",children:"Select state"}),s(h,{name:"state",id:"states",className:"w-full",onChange:e=>b(e.target.value),value:n,children:[t("option",{value:"",children:"Select State"}),p.map(e=>t("option",{value:e,children:e},e))]})]}),s("div",{className:"mb-4",children:[t(o,{htmlFor:"cities",className:"block text-gray-700 font-medium mb-2",children:"Select city"}),s(h,{name:"city",id:"cities",className:"w-full",onChange:e=>r(e.target.value),value:a,children:[t("option",{value:"",children:"Select City"}),i==null?void 0:i.map(e=>t("option",{value:e,children:e},e))]})]}),s("div",{className:"mb-4",children:[t(o,{htmlFor:"couponType",className:"block w-full text-gray-700 font-medium mb-2",children:"Tax Rate"}),t(w,{type:"number",name:"taxRate",value:l,step:.01,onChange:e=>x(e.target.value)})]}),t("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",children:"Update"})]})}),t(T,{query:d,tableName:"Tax Rates"})]})}export{k as default};
