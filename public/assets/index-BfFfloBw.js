import{r as a,cJ as de,R as ue,bu as W,bv as D,bx as A,cu as me,by as F,Z as N,cF as pe,db as ge,dc as fe,dd as he,de as ve,df as be,cZ as xe,cE as ye,bB as Se,n as P,l as m,ad as T,cp as $e,k as B,Q as q,ac as k,bo as Ce,F as Oe}from"./index-7VV-N64s.js";import{u as we}from"./useTestimonial-x15UWMB6.js";function Ee(){const[,e]=a.useReducer(r=>r+1,0);return e}const U=["xxl","xl","lg","md","sm","xs"],ze=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),Pe=e=>{const r=e,t=[].concat(U).reverse();return t.forEach((n,o)=>{const s=n.toUpperCase(),c=`screen${s}Min`,i=`screen${s}`;if(!(r[c]<=r[i]))throw new Error(`${c}<=${i} fails : !(${r[c]}<=${r[i]})`);if(o<t.length-1){const l=`screen${s}Max`;if(!(r[i]<=r[l]))throw new Error(`${i}<=${l} fails : !(${r[i]}<=${r[l]})`);const d=`screen${t[o+1].toUpperCase()}Min`;if(!(r[l]<=r[d]))throw new Error(`${l}<=${d} fails : !(${r[l]}<=${r[d]})`)}}),e};function je(){const[,e]=de(),r=ze(Pe(e));return ue.useMemo(()=>{const t=new Map;let n=-1,o={};return{matchHandlers:{},dispatch(s){return o=s,t.forEach(c=>c(o)),t.size>=1},subscribe(s){return t.size||this.register(),n+=1,t.set(n,s),s(o),n},unsubscribe(s){t.delete(s),t.size||this.unregister()},unregister(){Object.keys(r).forEach(s=>{const c=r[s],i=this.matchHandlers[c];i==null||i.mql.removeListener(i==null?void 0:i.listener)}),t.clear()},register(){Object.keys(r).forEach(s=>{const c=r[s],i=u=>{let{matches:d}=u;this.dispatch(Object.assign(Object.assign({},o),{[s]:d}))},l=window.matchMedia(c);l.addListener(i),this.matchHandlers[c]={mql:l,listener:i},i(l)})},responsiveMap:r}},[e])}function Ne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=a.useRef({}),t=Ee(),n=je();return a.useEffect(()=>{const o=n.subscribe(s=>{r.current=s,e&&t()});return()=>n.unsubscribe(o)},[]),r.current}const I=a.createContext("default"),_=e=>{let{children:r,size:t}=e;const n=a.useContext(I);return a.createElement(I.Provider,{value:t||n},r)},Re=e=>{const{antCls:r,componentCls:t,iconCls:n,avatarBg:o,avatarColor:s,avatarSizeBase:c,avatarSizeLG:i,avatarSizeSM:l,avatarFontSizeBase:u,avatarFontSizeLG:d,avatarFontSizeSM:p,borderRadius:g,borderRadiusLG:f,borderRadiusSM:E,lineWidth:C,lineType:O}=e,b=(x,w,S)=>({width:x,height:x,lineHeight:`${x-C*2}px`,borderRadius:"50%",[`&${t}-square`]:{borderRadius:S},[`${t}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${t}-icon`]:{fontSize:w,[`> ${n}`]:{margin:0}}});return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},A(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:s,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${C}px ${O} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"}}),b(c,u,g)),{"&-lg":Object.assign({},b(i,d,f)),"&-sm":Object.assign({},b(l,p,E)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ke=e=>{const{componentCls:r,avatarGroupBorderColor:t,avatarGroupSpace:n}=e;return{[`${r}-group`]:{display:"inline-flex",[`${r}`]:{borderColor:t},"> *:not(:first-child)":{marginInlineStart:n}}}},X=W("Avatar",e=>{const{colorTextLightSolid:r,controlHeight:t,controlHeightLG:n,controlHeightSM:o,fontSize:s,fontSizeLG:c,fontSizeXL:i,fontSizeHeading3:l,marginXS:u,colorBorderBg:d,colorTextPlaceholder:p}=e,g=D(e,{avatarBg:p,avatarColor:r,avatarSizeBase:t,avatarSizeLG:n,avatarSizeSM:o,avatarFontSizeBase:Math.round((c+i)/2),avatarFontSizeLG:l,avatarFontSizeSM:s,avatarGroupSpace:-u,avatarGroupBorderColor:d});return[Re(g),ke(g)]});var Be=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t};const Me=(e,r)=>{const t=a.useContext(I),[n,o]=a.useState(1),[s,c]=a.useState(!1),[i,l]=a.useState(!0),u=a.useRef(null),d=a.useRef(null),p=me(r,u),{getPrefixCls:g}=a.useContext(F),f=()=>{if(!d.current||!u.current)return;const v=d.current.offsetWidth,y=u.current.offsetWidth;if(v!==0&&y!==0){const{gap:z=4}=e;z*2<y&&o(y-z*2<v?(y-z*2)/v:1)}};a.useEffect(()=>{c(!0)},[]),a.useEffect(()=>{l(!0),o(1)},[e.src]),a.useEffect(()=>{f()},[e.gap]);const E=()=>{const{onError:v}=e;(v?v():void 0)!==!1&&l(!1)},{prefixCls:C,shape:O="circle",size:b="default",src:x,srcSet:w,icon:S,className:K,rootClassName:V,alt:ee,draggable:te,children:L,crossOrigin:re}=e,R=Be(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),h=b==="default"?t:b,ne=Object.keys(typeof h=="object"?h||{}:{}).some(v=>["xs","sm","md","lg","xl","xxl"].includes(v)),H=Ne(ne),oe=a.useMemo(()=>{if(typeof h!="object")return{};const v=U.find(z=>H[z]),y=h[v];return y?{width:y,height:y,lineHeight:`${y}px`,fontSize:S?y/2:18}:{}},[H,h]),$=g("avatar",C),[ae,se]=X($),ie=N({[`${$}-lg`]:h==="large",[`${$}-sm`]:h==="small"}),G=a.isValidElement(x),ce=N($,ie,{[`${$}-${O}`]:!!O,[`${$}-image`]:G||x&&i,[`${$}-icon`]:!!S},K,V,se),le=typeof h=="number"?{width:h,height:h,lineHeight:`${h}px`,fontSize:S?h/2:18}:{};let j;if(typeof x=="string"&&i)j=a.createElement("img",{src:x,draggable:te,srcSet:w,onError:E,alt:ee,crossOrigin:re});else if(G)j=x;else if(S)j=S;else if(s||n!==1){const v=`scale(${n}) translateX(-50%)`,y={msTransform:v,WebkitTransform:v,transform:v},z=typeof h=="number"?{lineHeight:`${h}px`}:{};j=a.createElement(pe,{onResize:f},a.createElement("span",{className:`${$}-string`,ref:d,style:Object.assign(Object.assign({},z),y)},L))}else j=a.createElement("span",{className:`${$}-string`,style:{opacity:0},ref:d},L);return delete R.onError,delete R.gap,ae(a.createElement("span",Object.assign({},R,{style:Object.assign(Object.assign(Object.assign({},le),oe),R.style),className:ce,ref:p}),j))},Q=a.forwardRef(Me),M=e=>e?typeof e=="function"?e():e:null,Fe=e=>{const{componentCls:r,popoverBg:t,popoverColor:n,width:o,fontWeightStrong:s,popoverPadding:c,boxShadowSecondary:i,colorTextHeading:l,borderRadiusLG:u,zIndexPopup:d,marginXS:p,colorBgElevated:g}=e;return[{[r]:Object.assign(Object.assign({},A(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--antd-arrow-background-color":g,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${r}-content`]:{position:"relative"},[`${r}-inner`]:{backgroundColor:t,backgroundClip:"padding-box",borderRadius:u,boxShadow:i,padding:c},[`${r}-title`]:{minWidth:o,marginBottom:p,color:l,fontWeight:s},[`${r}-inner-content`]:{color:n}})},fe(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${r}-content`]:{display:"inline-block"}}}]},Te=e=>{const{componentCls:r}=e;return{[r]:he.map(t=>{const n=e[`${t}6`];return{[`&${r}-${t}`]:{"--antd-arrow-background-color":n,[`${r}-inner`]:{backgroundColor:n},[`${r}-arrow`]:{background:"transparent"}}}})}},Ie=e=>{const{componentCls:r,lineWidth:t,lineType:n,colorSplit:o,paddingSM:s,controlHeight:c,fontSize:i,lineHeight:l,padding:u}=e,d=c-Math.round(i*l),p=d/2,g=d/2-t,f=u;return{[r]:{[`${r}-inner`]:{padding:0},[`${r}-title`]:{margin:0,padding:`${p}px ${f}px ${g}px`,borderBottom:`${t}px ${n} ${o}`},[`${r}-inner-content`]:{padding:`${s}px ${f}px`}}}},Z=W("Popover",e=>{const{colorBgElevated:r,colorText:t,wireframe:n}=e,o=D(e,{popoverBg:r,popoverColor:t,popoverPadding:12});return[Fe(o),Te(o),n&&Ie(o),ge(o,"zoom-big")]},e=>{let{zIndexPopupBase:r}=e;return{zIndexPopup:r+30,width:177}});var Le=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t};const He=(e,r,t)=>{if(!(!r&&!t))return a.createElement(a.Fragment,null,r&&a.createElement("div",{className:`${e}-title`},M(r)),a.createElement("div",{className:`${e}-inner-content`},M(t)))};function Ge(e){const{hashId:r,prefixCls:t,className:n,style:o,placement:s="top",title:c,content:i,children:l}=e;return a.createElement("div",{className:N(r,t,`${t}-pure`,`${t}-placement-${s}`,n),style:o},a.createElement("div",{className:`${t}-arrow`}),a.createElement(ve,Object.assign({},e,{className:r,prefixCls:t}),l||He(t,c,i)))}function _e(e){const{prefixCls:r}=e,t=Le(e,["prefixCls"]),{getPrefixCls:n}=a.useContext(F),o=n("popover",r),[s,c]=Z(o);return s(a.createElement(Ge,Object.assign({},t,{prefixCls:o,hashId:c})))}var We=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t};const De=e=>{let{title:r,content:t,prefixCls:n}=e;return!r&&!t?null:a.createElement(a.Fragment,null,r&&a.createElement("div",{className:`${n}-title`},M(r)),a.createElement("div",{className:`${n}-inner-content`},M(t)))},J=a.forwardRef((e,r)=>{const{prefixCls:t,title:n,content:o,overlayClassName:s,placement:c="top",trigger:i="hover",mouseEnterDelay:l=.1,mouseLeaveDelay:u=.1,overlayStyle:d={}}=e,p=We(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:g}=a.useContext(F),f=g("popover",t),[E,C]=Z(f),O=g(),b=N(s,C);return E(a.createElement(be,Object.assign({placement:c,trigger:i,mouseEnterDelay:l,mouseLeaveDelay:u,overlayStyle:d},p,{prefixCls:f,overlayClassName:b,ref:r,overlay:a.createElement(De,{prefixCls:f,title:n,content:o}),transitionName:xe(O,"zoom-big",p.transitionName),"data-popover-inject":!0})))});J._InternalPanelDoNotUseOrYouWillBeFired=_e;const Ae=e=>{const{getPrefixCls:r,direction:t}=a.useContext(F),{prefixCls:n,className:o,rootClassName:s,maxCount:c,maxStyle:i,size:l}=e,u=r("avatar",n),d=`${u}-group`,[p,g]=X(u),f=N(d,{[`${d}-rtl`]:t==="rtl"},o,s,g),{children:E,maxPopoverPlacement:C="top",maxPopoverTrigger:O="hover"}=e,b=ye(E).map((w,S)=>Se(w,{key:`avatar-key-${S}`})),x=b.length;if(c&&c<x){const w=b.slice(0,c),S=b.slice(c,x);return w.push(a.createElement(J,{key:"avatar-popover-key",content:S,trigger:O,placement:C,overlayClassName:`${d}-popover`},a.createElement(Q,{style:i},`+${x-c}`))),p(a.createElement(_,{size:l},a.createElement("div",{className:f,style:e.style},w)))}return p(a.createElement(_,{size:l},a.createElement("div",{className:f,style:e.style},b)))},Y=Q;Y.Group=Ae;function qe({refetch:e}){const r=async o=>{o.preventDefault(),console.log(B.toFormData(t)),await q.promise(async()=>{const s=await B.postForm("/testimonial",t);return e&&e(),s.data},{loading:"Submitting...",success:"Submitted",error:{render({data:s}){var c,i;return(i=(c=s.response)==null?void 0:c.data)==null?void 0:i.message}}})},[t,n]=a.useState({user:{name:void 0,photo:void 0},content:void 0,rating:void 0});return P("form",{onSubmit:r,className:"flex flex-col gap-1",children:[P("div",{children:[m(k,{required:!0,children:"Name"}),m(T,{type:"text",value:t.user.name,onChange:o=>n({...t,user:{...t.user,name:o.target.value}}),required:!0})]}),P("div",{children:[m(k,{required:!0,children:"Photo"}),m(T,{type:"file",onChange:o=>{console.log(o.target.files[0]),n({...t,user:{...t.user,photo:o.target.files[0]}})},required:!0})]}),P("div",{children:[m(k,{required:!0,children:"Content"}),m($e,{type:"text",value:t.content,onChange:o=>n({...t,content:o.target.value}),required:!0})]}),P("div",{children:[m(k,{required:!0,children:"Rating"}),m(T,{type:"number",value:t.rating,onChange:o=>n({...t,rating:o.target.value}),required:!0,min:1,minLength:1,max:5,maxLength:4,step:.1})]}),P("div",{className:"flex justify-end mt-2",children:[m("button",{type:"reset",className:"px-6 py-2 mr-2 leading-5 text-white transition-colors duration-200 transform bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:bg-red-500",children:"Reset"}),m("button",{type:"submit",className:"px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-blue-600 rounded-md hover:bg-blue-500 focus:outline-none focus:bg-blue-500",children:"Save"})]})]})}function Qe(){const e=we(),r=async t=>{q.promise(async()=>{await B.delete(`/testimonial/${t}`),e.refetch()},{loading:"Deleting...",success:"Deleted",error:{render({data:n}){var o,s;return(s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message}}})};return P(Oe,{children:[m(qe,{refetch:e.refetch}),m("div",{className:"mt-2",children:m(Ce,{columns:[{id:"user.name",header:"Name",accessorFn:t=>t.user.name},{id:"user.photo",header:"Photo",accessorFn:t=>m(Y,{icon:m("img",{src:`${B.defaults.baseURL}/testimonial/image/${t.user.photo}`,alt:t.user.name}),alt:t.user.name})},{id:"content",header:"Content",accessorFn:t=>t.content},{id:"rating",header:"Rating",accessorFn:t=>t.rating},{id:"action",header:"Action",accessorFn:t=>m("button",{onClick:()=>r(t._id),className:"text-red-500",children:"Delete"})}],data:e.data})})]})}export{Qe as default};
